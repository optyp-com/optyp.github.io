---
const { plans } = Astro.props;
---
<section id="plans" class="py-20 text-center">
  <div class="container mx-auto max-w-5xl px-4">
    <h2 class="text-4xl font-bold mb-8">Our Plans</h2>
    <p class="max-w-xl mx-auto mb-12">
      Choose the perfect plan to elevate your profile.
    </p>
    <div class="grid md:grid-cols-3 gap-8">
      {plans.map(plan => (
        <div class="p-6 border rounded shadow bg-white" key={plan.name}>
          <h3 class="text-2xl font-bold mb-4">{plan.name}</h3>
          <p class="mb-4">
            {plan.features &&
             plan.features.length &&
             plan.features.find(f => f.toLowerCase().includes("total")) ? (
              <>
                <span class="line-through text-gray-400 mr-2">
                  {/* Extract and display struck-through rupees and dollars separately */}
                  {
                    (() => {
                      const totalLine = plan.features.find(f => f.toLowerCase().includes("total"));
                      const rupeesMatch = totalLine.match(/â‚¹[\d,]+/);
                      const dollarsMatch = totalLine.match(/\$[\d.,]+/);
                      return (
                        <>
                          {rupeesMatch && <span>{rupeesMatch[0]} </span>}
                          {dollarsMatch && <span>({dollarsMatch[0]})</span>}
                        </>
                      );
                    })()
                  }
                </span>
                <span class="text-primary-600 font-extrabold text-3xl">
                  {plan.price}
                </span>
              </>
            ) : (
              <span class="text-primary-600 font-extrabold text-3xl">
                {plan.price}
              </span>
            )}
          </p>

          <ul class="list-disc text-left mb-4 px-4">
            {plan.features
              .filter(f => !f.toLowerCase().startsWith("total"))
              .map(feature => (
                <li key={feature}>{feature}</li>
              ))}
          </ul>
          <button class="bg-primary-600 text-white px-6 py-3 rounded hover:bg-primary-700 transition-colors">
            Choose Plan
          </button>
        </div>
      ))}
    </div>
  </div>
</section>
