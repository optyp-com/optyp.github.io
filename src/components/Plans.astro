---
const { plans } = Astro.props;
---

<section id="plans" class="bg-gray-50 py-20 text-center">
  <div class="container mx-auto max-w-5xl px-4">
    <!-- Section Heading -->
    <h2 class="text-4xl font-extrabold mb-4 text-gray-900 tracking-wide-heading">
      Our Plans
    </h2>
    <div class="w-20 h-1 bg-gradient-to-r from-primary-500 to-primary-700 mx-auto mb-10 rounded-full"></div>

    <p class="text-gray-800 mb-12 max-w-xl mx-auto">
      Choose the perfect plan to elevate your profile.
    </p>

    <!-- Plans Grid -->
    <div class="grid md:grid-cols-3 gap-8">
      {plans.map(plan => (
        <div
          class="group bg-white p-6 rounded-lg shadow hover:shadow-lg hover:scale-105 transition duration-300 hover:border-primary-500 border border-transparent transform"
          key={plan.name}
        >
          <!-- Plan Title -->
          <h3 class="text-2xl font-bold mb-4 text-gray-900 transition-colors duration-300 group-hover:text-primary-600">
            {plan.name}
          </h3>

          <!-- Price -->
          <p class="mb-4">
            {plan.features &&
             plan.features.length &&
             plan.features.find(f => f.toLowerCase().includes("total")) ? (
              <>
                <span class="line-through text-gray-400 mr-2">
                  {
                    (() => {
                      const totalLine = plan.features.find(f => f.toLowerCase().includes("total"));
                      const rupeesMatch = totalLine.match(/â‚¹[\d,]+/);
                      const dollarsMatch = totalLine.match(/\$[\d.,]+/);
                      return (
                        <>
                          {rupeesMatch && <span>{rupeesMatch[0]} </span>}
                          {dollarsMatch && <span>({dollarsMatch[0]})</span>}
                        </>
                      );
                    })()
                  }
                </span>
                <span class="text-primary-600 font-extrabold text-3xl">
                  {plan.price}
                </span>
              </>
            ) : (
              <span class="text-primary-600 font-extrabold text-3xl">
                {plan.price}
              </span>
            )}
          </p>

          <!-- Features -->
          <ul class="list-disc text-left mb-6 px-4 text-gray-800">
            {plan.features
              .filter(f => !f.toLowerCase().startsWith("total"))
              .map(feature => (
                <li key={feature}>{feature}</li>
              ))}
          </ul>

          <!-- Choose Plan button -->
          <button
            onclick="openContactForm()"
            class="inline-block bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition-colors"
          >
            Choose Plan
          </button>
        </div>
      ))}
    </div>
  </div>
</section>
