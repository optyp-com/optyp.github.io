---
const { testimonials } = Astro.props;
import 'swiper/css';
import 'swiper/css/navigation';
import 'swiper/css/pagination';
import 'swiper/element/bundle';
---

<section id="testimonials" class="relative py-24 bg-gradient-to-b from-white to-primary-50 dark:from-dark-900 dark:to-dark-800">
  <div class="container mx-auto max-w-6xl px-6 text-center">
    
    <!-- Section Heading -->
    <h2 class="font-heading text-4xl md:text-5xl font-bold mb-4 text-gray-900 dark:text-white">
      Hear From Our Clients Worldwide
    </h2>
    <div class="w-20 h-1 bg-gradient-to-r from-primary-500 to-secondary-500 mx-auto mb-10 rounded-full"></div>

    <!-- Intro -->
    <p class="text-lg text-gray-600 dark:text-gray-300 max-w-3xl mx-auto mb-12">
      We’ve optimized <span class="font-semibold text-primary-600 dark:text-primary-400">500+ professional profiles</span> across multiple countries — empowering careers globally while ensuring privacy and trust.
    </p>

    <!-- Swiper Carousel -->
    <swiper-container
      class="pb-16"
      space-between="30"
      slides-per-view="1"
      autoplay-delay="5000"
      autoplay-disable-on-interaction="false"
      pagination="true"
      navigation="true"
      loop="true"
      breakpoints='{"768":{"slidesPerView":2},"1024":{"slidesPerView":3}}'
    >
      {testimonials.map(({ name, profession, location, quote, image, rating }) => (
        <swiper-slide>
          <blockquote class="bg-white/40 dark:bg-dark-800/50 backdrop-blur-md border border-white/20 p-8 rounded-2xl shadow-soft hover:shadow-glass transition">
            
            <!-- Profile Info -->
            <div class="flex flex-col items-center mb-6">
              {image && (
                <img src={image} alt={name} class="w-16 h-16 rounded-full shadow-md mb-3" loading="lazy" />
              )}
              <h3 class="font-semibold text-gray-900 dark:text-white">{name}</h3>
              <p class="text-sm text-gray-500 dark:text-gray-400">{profession}, {location}</p>
            </div>

            <!-- Quote -->
            <p class="text-gray-700 dark:text-gray-300 italic mb-6 leading-relaxed">“{quote}”</p>

            <!-- Rating -->
            {rating && (
              <div class="flex justify-center">
                {[...Array(rating)].map((_, i) => (
                  <span key={i} class="text-yellow-400 text-lg">★</span>
                ))}
                {[...Array(5 - rating)].map((_, i) => (
                  <span key={i} class="text-gray-300 dark:text-gray-600 text-lg">★</span>
                ))}
              </div>
            )}
          </blockquote>
        </swiper-slide>
      ))}
    </swiper-container>

    <!-- Navigation -->
    <div class="swiper-button-prev hidden md:flex absolute left-0 top-1/2 transform -translate-y-1/2 z-10"></div>
    <div class="swiper-button-next hidden md:flex absolute right-0 top-1/2 transform -translate-y-1/2 z-10"></div>
  </div>
</section>

<style>
  /* Pagination Dots */
  .swiper-pagination-bullet {
    background: #22c55e;
    opacity: 0.4;
    transition: all 0.3s;
  }
  .swiper-pagination-bullet-active {
    background: #16a34a;
    opacity: 1;
    transform: scale(1.2);
  }

  /* Navigation Arrows */
  .swiper-button-next,
  .swiper-button-prev {
    color: #16a34a;
    background: transparent;
    width: auto;
    height: auto;
    transition: transform 0.3s, color 0.3s;
  }
  .swiper-button-next:hover,
  .swiper-button-prev:hover {
    color: #15803d;
    transform: scale(1.2);
  }
  .swiper-button-next::after,
  .swiper-button-prev::after {
    font-size: 1.75rem;
    font-weight: bold;
  }
</style>
