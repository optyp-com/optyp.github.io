---
const siteUrl = "https://optyp-com.github.io/optyp.github.io";
import Contact from './contact.astro';
---
<section id="faq" class="relative py-20 px-4 bg-gradient-to-br from-black via-gray-900 to-black text-white">
  <div class="container mx-auto max-w-5xl">
    <!-- Header -->
    <div class="text-center mb-12">
      <h1 class="text-3xl sm:text-4xl lg:text-5xl font-extrabold mb-4 tracking-wide-heading">
        Frequently Asked Questions
      </h1>

      <div class="w-20 h-1 bg-gradient-to-r from-[#47C6A2] to-[#2F9E7F] mx-auto mb-10 rounded-full shadow-sm"></div>

      <p class="text-lg font-medium text-gray-300 max-w-2xl mx-auto">
        Get quick answers to common questions about our professional resume and profile optimization services
      </p>
    </div>

    <!-- FAQ Items -->
    <div class="space-y-6">
      <!-- FAQ 1 Example -->
      <div class="group glass-box">
        <button
          class="faq-question w-full text-left p-6 font-bold text-lg transition-colors duration-300 flex justify-between items-center text-white"
          aria-expanded="true"
          aria-controls="faq1"
          id="faq-btn-1"
        >
          <span>How does the process work after I sign up?</span>
          <svg class="w-6 h-6 transform rotate-180 transition-transform duration-300 text-[#47C6A2]" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M19 9l-7 7-7-7"></path>
          </svg>
        </button>
        <div id="faq1" class="faq-answer px-6 pb-6 text-gray-300 text-base leading-relaxed transition-all duration-300" style="max-height: none;">
          <p>Once you sign up, you’ll receive a questionnaire. After submission, our experts create your resume/profile and deliver it in 24–48 hours. Elite plans get priority and faster turnaround.</p>
        </div>
      </div>

      <!-- Repeat the same structure for FAQ2 – FAQ8 (just updated icons & colors) -->
    </div>

    <!-- CTA Section -->
    <div class="text-center mt-12 p-6 rounded-lg glass-box">
      <h3 class="text-xl font-bold text-white mb-2">Still have questions?</h3>
      <p class="text-gray-300 mb-4">Our team is here to help you succeed in your career journey.</p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <button
          id="faq-contact-btn"
          class="inline-flex items-center px-6 py-3 glass-btn text-white font-semibold rounded-lg shadow hover:shadow-lg hover:scale-105 transition duration-300 focus:outline-none focus:ring-2 focus:ring-[#47C6A2]"
          type="button"
        >
          Contact Us
        </button>
        <a
          href="https://wa.me/919848934274"
          class="inline-flex items-center px-6 py-3 border border-[#47C6A2] text-[#47C6A2] font-semibold rounded-lg hover:bg-white/5 transition duration-300"
          target="_blank" rel="noopener"
        >
          WhatsApp Support
        </a>
      </div>
    </div>
  </div>

  <!-- Scripts (unchanged) -->
  <script is:inline>
    (function () {
      function toggleFAQ(faqId, button) {
        const ans = document.getElementById(faqId);
        if (!ans || !button) return;
        const expanded = button.getAttribute('aria-expanded') === 'true';
        document.querySelectorAll('.faq-answer').forEach(el => {
          el.classList.add('hidden'); el.style.maxHeight = null;
        });
        document.querySelectorAll('.faq-question').forEach(b => {
          b.setAttribute('aria-expanded', 'false');
          const svg = b.querySelector('svg'); if (svg) svg.style.transform = 'rotate(0deg)';
        });
        if (!expanded) {
          ans.classList.remove('hidden');
          ans.style.maxHeight = ans.scrollHeight + "px";
          button.setAttribute('aria-expanded', 'true');
          const icon = button.querySelector('svg'); if (icon) icon.style.transform = 'rotate(180deg)';
        }
      }
      function attachFAQHandlers() {
        document.querySelectorAll('.faq-question').forEach(button => {
          const controls = button.getAttribute('aria-controls');
          button.addEventListener('click', () => toggleFAQ(controls, button));
          button.addEventListener('keydown', (ev) => {
            if (ev.key === 'Enter' || ev.key === ' ') { ev.preventDefault(); toggleFAQ(controls, button); }
          });
          if (!button.hasAttribute('tabindex')) button.setAttribute('tabindex', '0');
        });
        if (location.hash) {
          const h = location.hash.replace('#', '');
          const btn = document.querySelector(`[aria-controls="${h}"]`);
          if (btn) setTimeout(()=> toggleFAQ(h, btn), 120);
        }
      }
      function attachContactTrigger() {
        const btn = document.getElementById('faq-contact-btn');
        if (btn) {
          btn.addEventListener('click', function () {
            if (typeof openContactForm === 'function') { openContactForm(); }
            else {
              let tries = 0; const t = setInterval(() => {
                tries++;
                if (typeof openContactForm === 'function') { clearInterval(t); openContactForm(); }
                else if (tries > 10) clearInterval(t);
              }, 200);
            }
          });
        }
      }
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => { attachFAQHandlers(); attachContactTrigger(); });
      } else {
        attachFAQHandlers(); attachContactTrigger();
      }
    })();
  </script>

  <Contact />
</section>

<style>
  .glass-box {
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 0.75rem;
    backdrop-filter: blur(8px);
    box-shadow: 0 8px 30px rgba(0,0,0,0.6);
    transition: transform 0.25s ease, box-shadow 0.25s ease, border-color 0.25s ease;
    overflow: hidden;
  }
  .glass-box:hover {
    transform: translateY(-4px);
    box-shadow: 0 18px 50px rgba(0,0,0,0.7);
    border-color: rgba(71,198,162,0.4); /* teal glow */
  }
  .faq-answer { transition: max-height 0.35s ease, opacity 0.25s ease; }
  .faq-question:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(71,198,162,0.3);
  }
  @media (max-width: 640px) {
    .glass-box { border-radius: 0.6rem; padding: 0; }
    .faq-answer { font-size: 0.95rem; }
  }
</style>
