---
---
<nav id="main-nav" class="fixed inset-x-0 top-0 z-50 bg-transparent transition-all duration-500">
  <div class="container mx-auto flex items-center justify-between px-6 py-3">
    
    <!-- Logo -->
    <a href="/" class="flex items-center space-x-2">
      <img src="/images/logo.svg" alt="OPTYP Logo" class="h-9 w-auto" />
      <span class="font-heading text-xl font-bold bg-gradient-to-r from-primary-500 to-secondary-500 bg-clip-text text-transparent">
        OPTYP
      </span>
    </a>

    <!-- Desktop Menu -->
    <ul class="hidden md:flex space-x-8 font-medium text-gray-800 dark:text-gray-200">
      {["Home","About","Services","Plans","Testimonials","Contact"].map((item) => (
        <li>
          <a 
            href={`#${item.toLowerCase()}`} 
            class="nav-link relative hover:text-primary-600 dark:hover:text-primary-400 transition-colors after:block after:h-[2px] after:w-0 after:bg-primary-600 dark:after:bg-primary-400 after:transition-all after:duration-300 hover:after:w-full after:absolute after:-bottom-1 after:left-0"
            data-section={item.toLowerCase()}
          >
            {item}
          </a>
        </li>
      ))}
    </ul>

    <!-- Desktop CTA -->
    <div class="hidden md:block">
      <a href="#plans" class="px-5 py-2 rounded-xl bg-primary-600 text-white font-semibold shadow-soft hover:shadow-glass hover:scale-105 transition">
        Get Started
      </a>
    </div>

    <!-- Mobile Hamburger -->
    <button
      id="nav-toggle"
      class="md:hidden text-gray-700 dark:text-gray-200 focus:outline-none"
      aria-label="Toggle navigation menu"
    >
      <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
  </div>

  <!-- Mobile Menu -->
  <div id="mobile-menu"
       class="hidden md:hidden bg-white/95 dark:bg-dark-900/95 backdrop-blur-md border-t border-gray-200 dark:border-gray-700 shadow-lg transform -translate-y-5 opacity-0 transition-all duration-500 ease-out">
    <ul class="flex flex-col space-y-3 px-6 py-6 text-gray-800 dark:text-gray-200 font-medium">
      <li><a href="#hero" class="nav-link block py-2 hover:text-primary-600 dark:hover:text-primary-400" data-section="hero">Home</a></li>
      <li><a href="#about" class="nav-link block py-2 hover:text-primary-600 dark:hover:text-primary-400" data-section="about">About</a></li>
      <li><a href="#services" class="nav-link block py-2 hover:text-primary-600 dark:hover:text-primary-400" data-section="services">Services</a></li>
      <li><a href="#plans" class="nav-link block py-2 hover:text-primary-600 dark:hover:text-primary-400" data-section="plans">Plans</a></li>
      <li><a href="#testimonials" class="nav-link block py-2 hover:text-primary-600 dark:hover:text-primary-400" data-section="testimonials">Testimonials</a></li>
      <li><a href="#contact" class="nav-link block py-2 hover:text-primary-600 dark:hover:text-primary-400" data-section="contact">Contact</a></li>
      <li>
        <a href="#plans" class="block text-center px-5 py-2 rounded-xl bg-primary-600 text-white font-semibold shadow-soft hover:shadow-glass transition">
          Get Started
        </a>
      </li>
    </ul>
  </div>

  <!-- Scripts -->
  <script is:inline>
    const nav = document.getElementById("main-nav");
    const toggle = document.getElementById("nav-toggle");
    const mobileMenu = document.getElementById("mobile-menu");
    const navLinks = document.querySelectorAll(".nav-link");
    const sections = document.querySelectorAll("section[id]");

    // Scroll effect: transparent â†’ glassmorphic
    window.addEventListener("scroll", () => {
      if (window.scrollY > 50) {
        nav.classList.add("bg-white/80","dark:bg-dark-900/80","backdrop-blur-md","shadow-md");
        nav.classList.remove("bg-transparent");
      } else {
        nav.classList.add("bg-transparent");
        nav.classList.remove("bg-white/80","dark:bg-dark-900/80","shadow-md");
      }
    });

    // Scrollspy (active link)
    function setActive(sectionId) {
      navLinks.forEach(link => {
        if (link.dataset.section === sectionId) {
          link.classList.add("text-primary-600","dark:text-primary-400","font-semibold");
        } else {
          link.classList.remove("text-primary-600","dark:text-primary-400","font-semibold");
        }
      });
    }
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) setActive(entry.target.id);
        });
      },
      { threshold: 0.6 }
    );
    sections.forEach(section => observer.observe(section));

    // Smooth scroll
    navLinks.forEach(link => {
      link.addEventListener("click", (e) => {
        const targetId = link.getAttribute("href").split("#")[1];
        const target = document.getElementById(targetId);
        if (target) {
          e.preventDefault();
          const offset = target.offsetTop - nav.offsetHeight;
          window.scrollTo({ top: offset, behavior: "smooth" });
        }
        mobileMenu.classList.add("hidden");
      });
    });

    // Mobile menu toggle
    toggle.addEventListener("click", () => {
      if (mobileMenu.classList.contains("hidden")) {
        mobileMenu.classList.remove("hidden");
        requestAnimationFrame(() => {
          mobileMenu.classList.remove("opacity-0","-translate-y-5");
          mobileMenu.classList.add("opacity-100","translate-y-0");
        });
      } else {
        mobileMenu.classList.remove("opacity-100","translate-y-0");
        mobileMenu.classList.add("opacity-0","-translate-y-5");
        setTimeout(() => mobileMenu.classList.add("hidden"), 500);
      }
    });
  </script>

  <style>
    .nav-link {
      transition: all 0.3s ease;
    }
  </style>
</nav>
