---
const { services = [] } = Astro.props; // ✅ Safe fallback so build never crashes

// Map service titles to correct /explore routes
const serviceLinks = {
  "ATS Resume": "/explore/ats-resume",
  "LinkedIn Optimization": "/explore/linkedin",
  "Naukri Optimization": "/explore/job-portals/naukri",
  "Indeed Optimization": "/explore/job-portals/indeed",
  "GitHub Enhancement": "/explore/github",
  "Portfolio Creation": "/explore/portfolio-site",
  "Upwork Profile Setup": "/explore/freelancing/upwork",
  "Fiverr Profile Setup": "/explore/freelancing/fiverr",
  "Toptal Profile Setup": "/explore/freelancing/toptal",
  "Personal Branding": "/explore/personal-branding",
};

// ✅ Optional backup data (if parent forgets to pass)
const defaultServices = [
  { title: "ATS Resume", description: "Optimize your resume for ATS systems." },
  { title: "LinkedIn Optimization", description: "Enhance your professional presence." },
  { title: "Naukri Optimization", description: "Get noticed on job portals." },
  { title: "GitHub Enhancement", description: "Showcase your projects effectively." },
  { title: "Portfolio Creation", description: "Build a personal brand website." },
  { title: "Personal Branding", description: "Boost your visibility with tailored strategy." },
];

const data = services.length ? services : defaultServices;
---

<section id="services" class="relative py-20 lg:py-28 bg-gradient-to-b from-black via-gray-900 to-black overflow-hidden">
  <div class="container mx-auto max-w-6xl px-6 sm:px-10 text-center relative z-10">
    
    <!-- Section Heading -->
    <h2 class="text-3xl sm:text-4xl lg:text-5xl font-extrabold mb-4 text-white">
      Our <span class="text-[#47C6A2]">Services</span>
    </h2>
    <div class="w-24 h-1 bg-gradient-to-r from-[#47C6A2] to-[#2F9E7F] mx-auto mb-10 rounded-full shadow-lg"></div>

    <p class="text-gray-300 mb-12 max-w-3xl mx-auto">
      We offer a full suite of career services that not only optimize your existing profiles 
      but also build new, high-impact accounts from scratch.
    </p>

    <!-- Services Grid -->
    <div class="grid gap-8 sm:gap-10 sm:grid-cols-2 lg:grid-cols-3">
      {data.map((service, i) => (
        <div
          key={service.title}
          class="service-card group relative p-8 rounded-2xl transition-all duration-300 
                 bg-white/5 border border-white/10 backdrop-blur-lg 
                 hover:border-[#47C6A2]/70 hover:shadow-[0_0_25px_rgba(71,198,162,0.5)] 
                 hover:scale-105"
          data-aos="fade-up"
          data-aos-delay={i * 100}
        >
          <!-- Icon -->
          {service.icon && (
            <div
              class="icon-box w-16 h-16 mx-auto mb-6 flex items-center justify-center 
                     rounded-full bg-gradient-to-r from-[#47C6A2] to-[#2F9E7F] shadow-lg 
                     transition-all duration-300 group-hover:scale-110 group-hover:rotate-6"
            >
              <img
                src={service.icon}
                alt={service.title}
                class="w-8 h-8 text-white"
                loading="lazy"
              />
            </div>
          )}

          <!-- Title -->
          <h3 class="text-xl font-semibold mb-3 text-white group-hover:text-[#47C6A2] transition-colors">
            {service.title}
          </h3>

          <!-- Description -->
          <p class="text-gray-300 mb-6">
            {service.description}
          </p>

          <!-- See More Button -->
          {serviceLinks[service.title] && (
            <a 
              href={serviceLinks[service.title]}
              class="inline-block mt-2 px-4 py-2 text-sm font-semibold rounded-md 
                     bg-[#47C6A2]/80 backdrop-blur-md border border-white/10 
                     text-black hover:bg-[#2F9E7F]/90 hover:shadow-[0_0_20px_rgba(71,198,162,0.5)] 
                     transition-all duration-300"
            >
              See More
            </a>
          )}
        </div>
      ))}
    </div>
  </div>

  <!-- Extra Styles -->
  <style>
    /* Service card hover glow */
    .service-card {
      transition: all 0.3s ease;
    }

    /* Icon pulse effect */
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    .service-card:hover .icon-box {
      animation: pulse 1.2s ease-in-out infinite;
    }

    /* Mobile adjustments */
    @media (max-width: 640px) {
      .service-card {
        padding: 1.5rem;
      }
      .service-card h3 {
        font-size: 1.125rem;
      }
      .service-card p {
        font-size: 0.95rem;
      }
    }
  </style>

  <!-- AOS Initialization -->
  <script type="module">
    import AOS from "aos";
    import "aos/dist/aos.css";
    AOS.init({
      duration: 800,
      once: true,
      offset: 80,
    });
  </script>
</section>
