---
import Layout from '../layouts/Layout.astro';
import Hero from '../components/Hero.astro';
import About from '../components/About.astro';
import Services from '../components/Services.astro';
import Plans from '../components/Plans.astro';
import Testimonials from '../components/Testimonials.astro';
import Contact from '../components/Contact.astro';
import FAQHome from '../components/FAQHome.astro';
import AiAnalyzer from '../components/ai-analyzer.astro';  // ✅ Added
import { services } from '../data/services.js';
import { plans } from '../data/plans.js';
import { testimonials } from '../data/testimonials.js';
---

<Layout
  title="OPTYP – Optimize Your Professionalism"
  description="Premium resume, LinkedIn, Naukri, and portfolio optimization services to help professionals get hired faster globally."
>
  <main class="bg-[linear-gradient(180deg,var(--bg-900),var(--bg-800))] text-gray-100">
    <!-- Hero -->
    <section id="hero" class="scroll-mt-20" role="region" aria-labelledby="hero-heading">
      <Hero />
    </section>

    <!-- About -->
    <section id="about" class="relative py-12 sm:py-16 lg:py-20 scroll-mt-20" role="region" aria-labelledby="about-heading">
      <div class="glass-container max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <About />
      </div>
    </section>

    <!-- Services -->
    <section id="services" class="relative py-12 sm:py-16 lg:py-20 scroll-mt-20" role="region" aria-labelledby="services-heading">
      <div class="glass-container max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <Services services={services} />
      </div>
    </section>

    <!-- Plans -->
    <section id="plans" class="relative py-12 sm:py-16 lg:py-20 scroll-mt-20" role="region" aria-labelledby="plans-heading">
      <div class="glass-container max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <Plans plans={plans} />
      </div>
    </section>

    <!-- Testimonials -->
    <section id="testimonials" class="relative py-12 sm:py-16 lg:py-20 scroll-mt-20" role="region" aria-labelledby="testimonials-heading">
      <div class="glass-container max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <Testimonials testimonials={testimonials} />
      </div>
    </section>

    <!-- ✅ NEW SECTION: AI ANALYZER -->
    <section id="ai-analyzer" class="relative py-12 sm:py-16 lg:py-20 scroll-mt-20" role="region" aria-labelledby="ai-heading">
      <div class="glass-container max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 id="ai-heading" class="sr-only">AI Resume & LinkedIn Analyzer</h2>
        <AiAnalyzer />  <!-- ✅ New Component -->
      </div>
    </section>

    <!-- FAQ -->
    <section id="faq" class="relative py-12 sm:py-16 lg:py-20 scroll-mt-20" role="region" aria-labelledby="faq-heading">
      <div class="glass-container max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <FAQHome />
      </div>
    </section>

    <!-- Contact -->
    <section id="contact" class="relative py-12 sm:py-16 lg:py-20 scroll-mt-20" role="region" aria-labelledby="contact-heading">
      <div class="glass-container max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <Contact />
      </div>
    </section>
  </main>

  <style>
    /* Reusable glass effect (uses CSS variables provided in Layout or global.css) */
    .glass-container {
      background: var(--panel, rgba(255,255,255,0.06));
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: 1rem;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
      padding: 1.25rem;
      transition: all 0.28s ease;
    }

    .glass-container:hover {
      border-color: rgba(0, 255, 204, 0.16);
      box-shadow: 0 18px 60px rgba(0, 255, 204, 0.06);
      transform: translateY(-4px);
    }

    /* Ensure comfortable spacing for mobile-first */
    @media (min-width: 640px) {
      .glass-container { padding: 2rem; }
    }
  </style>

  <!-- Contact link scroll/modal logic -->
  <script is:inline>
    document.addEventListener('click', function (ev) {
      const a = ev.target.closest && ev.target.closest('a[href*="#contact"]');
      if (!a) return;
      try {
        const href = a.getAttribute('href') || '';
        if (href.indexOf('http') === 0 && !href.includes(location.hostname)) return;
      } catch (e) { /* ignore */ }

      ev.preventDefault();
      if (typeof openContactForm === 'function') {
        openContactForm();
      } else {
        const el = document.getElementById('contact');
        if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    }, { passive: false });

    document.addEventListener('DOMContentLoaded', function () {
      if (location.hash === '#contact') {
        if (typeof openContactForm === 'function') {
          openContactForm();
        } else {
          const el = document.getElementById('contact');
          if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      }
    });
  </script>
</Layout>
