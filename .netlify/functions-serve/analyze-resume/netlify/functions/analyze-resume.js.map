{
  "version": 3,
  "sources": ["file:///D:/daws/repos/optyp.github.io/netlify/functions/analyze-resume.js"],
  "sourceRoot": "C:/Users/admin/AppData/Local/Temp/tmp-20096-cdltjApW3TZt",
  "sourcesContent": ["// \u2705 /netlify/functions/analyze-resume.js\r\n// Evaluate a resume (with or without job description) using Gemini\r\n\r\nimport { GoogleGenerativeAI } from \"@google/generative-ai\";\r\n\r\nconsole.log(\r\n  \"\uD83D\uDD0D GEMINI_API_KEY status:\",\r\n  process.env.GEMINI_API_KEY ? \"FOUND \u2705\" : \"MISSING \u274C\"\r\n);\r\n\r\nexport async function handler(event) {\r\n  try {\r\n    const { resumeText, jobDescription } = JSON.parse(event.body || \"{}\");\r\n\r\n    if (!resumeText) {\r\n      return {\r\n        statusCode: 400,\r\n        body: JSON.stringify({ error: \"Missing resume text\" }),\r\n      };\r\n    }\r\n\r\n    const genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY);\r\n    const model = genAI.getGenerativeModel({ model: \"gemini-1.5-flash\" });\r\n\r\n    const prompt = `\r\nYou are an ATS (Applicant Tracking System) evaluator.\r\nAnalyze this resume${jobDescription ? ` for the following job description: ${jobDescription}` : \"\"}.\r\nProvide:\r\n1. ATS Score (0\u2013100)\r\n2. Missing or weak keywords / skills\r\n3. Top 5 recommendations for improvement\r\n4. Tone or formatting suggestions\r\n\r\nResume:\r\n${resumeText}\r\n`;\r\n\r\n    const result = await model.generateContent(prompt);\r\n    const aiText = result.response.text();\r\n\r\n    return {\r\n      statusCode: 200,\r\n      body: JSON.stringify({ result: aiText }),\r\n    };\r\n  } catch (error) {\r\n    console.error(\"\u274C analyze-resume error:\", error);\r\n    return {\r\n      statusCode: 500,\r\n      body: JSON.stringify({\r\n        error:\r\n          error?.message ||\r\n          \"Internal server error while processing resume analysis\",\r\n      }),\r\n    };\r\n  }\r\n}\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA,2BAAmC;AAEnC,QAAQ;AAAA,EACN;AAAA,EACA,QAAQ,IAAI,iBAAiB,iBAAY;AAC3C;AAEA,eAAsB,QAAQ,OAAO;AACnC,MAAI;AACF,UAAM,EAAE,YAAY,eAAe,IAAI,KAAK,MAAM,MAAM,QAAQ,IAAI;AAEpE,QAAI,CAAC,YAAY;AACf,aAAO;AAAA,QACL,YAAY;AAAA,QACZ,MAAM,KAAK,UAAU,EAAE,OAAO,sBAAsB,CAAC;AAAA,MACvD;AAAA,IACF;AAEA,UAAM,QAAQ,IAAI,wCAAmB,QAAQ,IAAI,cAAc;AAC/D,UAAM,QAAQ,MAAM,mBAAmB,EAAE,OAAO,mBAAmB,CAAC;AAEpE,UAAM,SAAS;AAAA;AAAA,qBAEE,iBAAiB,uCAAuC,cAAc,KAAK,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQhG,UAAU;AAAA;AAGR,UAAM,SAAS,MAAM,MAAM,gBAAgB,MAAM;AACjD,UAAM,SAAS,OAAO,SAAS,KAAK;AAEpC,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,MAAM,KAAK,UAAU,EAAE,QAAQ,OAAO,CAAC;AAAA,IACzC;AAAA,EACF,SAAS,OAAO;AACd,YAAQ,MAAM,gCAA2B,KAAK;AAC9C,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,MAAM,KAAK,UAAU;AAAA,QACnB,OACE,OAAO,WACP;AAAA,MACJ,CAAC;AAAA,IACH;AAAA,EACF;AACF;",
  "names": []
}
